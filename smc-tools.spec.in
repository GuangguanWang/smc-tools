Name:           smc-tools
Version:        1.2.99
Release:        1%{?dist}
Summary:        Shared Memory Communication Tools

License:        EPL
URL:            https://www.ibm.com/developerworks/linux/linux390/smc-tools.html
Source0:        %{name}-%{version}.tar.gz

BuildRequires:  gcc
BuildRequires:  libnl3-devel


%description
The Shared Memory Communication Tools (smc-tools) package enables usage of SMC
sockets in Linux.

%prep
%autosetup


%build
CFLAGS="%{build_cflags}" LDFLAGS="%{build_ldflags}" V=1
# Requires rpm v4.12 or later
#%make_build CFLAGS="%{build_cflags}" LDFLAGS="%{build_ldflags}" V=1


%install
%make_install V=1


%files
%license LICENSE
%doc README.smctools
%{_bindir}/smc_dbg
%{_bindir}/smc_pnet
%{_bindir}/smc_run
%{_bindir}/smcss
%{_libdir}/libsmc-preload.so
%{_mandir}/man7/af_smc.7*
%{_mandir}/man8/smc_pnet.8*
%{_mandir}/man8/smc_run.8*
%{_mandir}/man8/smcss.8*
%ifarch s390 s390x
%{_bindir}/smc_rnics
%{_mandir}/man8/smc_rnics.8*
%endif
